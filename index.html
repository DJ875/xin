<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录 - 购物系统</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/main.css">
    <!-- 先加载 Netlify Identity Widget -->
    <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body class="auth-page">
    <style>
        .auth-wrapper{min-height:100vh;display:flex;justify-content:center;align-items:center;gap:40px;padding:20px;}
        .auth-wrapper img{max-width:450px;width:45%;border-radius:12px;box-shadow:0 8px 25px rgba(0,0,0,.2);}
        .auth-card{width:600px;}
        @media (max-width:768px){.auth-wrapper{flex-direction:column;} .auth-wrapper img{width:60%;}}
        .site-title{position:fixed;top:40px;left:0;width:100%;text-align:center;font-size:48px;font-weight:700;color:#ffffff;pointer-events:none;text-shadow:0 4px 10px rgba(0,0,0,.3);z-index:1;}
    </style>
    <!-- 动态背景装饰 -->
    <style>
      body.auth-page::before{content:'';position:fixed;top:-20%;left:-20%;width:140%;height:140%;pointer-events:none;background:conic-gradient(from 0deg,var(--c1,#31d8fc),var(--c2,#6b5bff),var(--c3,#ff6b6b),var(--c4,#31d8fc));filter:blur(120px);animation:bgRotate 20s linear infinite;z-index:-1;}
      @keyframes bgRotate{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }
    </style>
    <div class="site-title">数字化交易平台</div>
    <div class="auth-wrapper">
        <img src="images/login-character.jpg.png" alt="illustration">
        <div class="auth-card">
            <div class="login-header">
                <button type="button" onclick="window.switchLoginType('user')" class="login-tab active" id="userLoginBtn">用户登录</button>
                <button type="button" onclick="window.switchLoginType('merchant')" class="login-tab" id="merchantLoginBtn">商家登录</button>
            </div>
            <div class="login-form" id="localLoginForm">
                <div class="form-group">
                    <input type="text" id="username" placeholder="用户名" required>
                    <div class="error-message" id="usernameError"></div>
                </div>
                <div class="form-group">
                    <input type="password" id="password" placeholder="密码" required>
                    <div class="error-message" id="passwordError"></div>
                </div>
                <div class="error-message" id="loginError"></div>
                <div class="login-buttons">
                    <button type="button" onclick="window.localLogin()" class="gradient-button">本地登录</button>
                    <button type="button" onclick="window.showNetlifyLogin()" class="gradient-button">Netlify登录</button>
                </div>
                <div class="register-links">
                    <a href="register.html" id="registerLink" class="register-link">注册新用户</a>
                    <a href="merchant_register.html" id="merchantRegisterLink" class="register-link" style="display: none;">商家入驻</a>
                </div>
            </div>
        </div>
    </div>
    <!-- 按顺序加载依赖脚本 -->
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/login.js"></script>
</body>
</html> 